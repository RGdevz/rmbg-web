import{S as b,U as _,P as h,M as I,O as S,i as x,c as k}from"./samples-1oBpCGFG.js";import{s as B,_ as V,r as o,o as m,c as p,a as n,d as u,b as N,w as P,e as d,f as l,t as W}from"./index-CrAoXqsq.js";import"./onnxruntime-web-S9ShUtos.js";const G={components:{Samples:b,UploadView:_,ProgressView:h,MyImage:I},data(){return{loading:!1,countdown:"",interval:void 0,showNoWebGpuWarning:!1}},unmounted(){S.Instance.removeAllSessions()},mounted(){Promise.resolve().then(async()=>{await B()||(this.showNoWebGpuWarning=!0)}),crossOriginIsolated||console.log("crossOriginIsolated off")},methods:{async useSample(a){try{const e=await(await fetch(a)).blob();await this.onInputFile(e)}catch(e){alert(String(e?.message||e))}},async onInputFile(a){if(this.loading)return;const e=Date.now();this.interval=setInterval(()=>{const s=Date.now()-e,i=Math.floor(s/1e3),t=s%1e3;this.countdown=`${i}.${t}`}),this.loading=!0;try{const s=await x(a),i=await k(s);await this.$refs.output.setImage(s,i)}catch(s){console.error(s),alert(String(s?.message||s))}finally{clearInterval(this.interval),this.loading=!1}}}},O={style:{"text-align":"center"}},F={key:1};function M(a,e,s,i,t,c){const g=o("message"),f=o("upload-view"),w=o("ProgressView"),y=o("my-image"),v=o("samples");return m(),p("div",O,[e[3]||(e[3]=n("div",{class:"py-2"},null,-1)),e[4]||(e[4]=n("h4",{class:"text-xl"},[u("Remove Background - "),n("a",{target:"_blank",href:"https://huggingface.co/briaai/RMBG-1.4"},"Briaai")],-1)),t.showNoWebGpuWarning?(m(),N(g,{key:0,closable:!1,class:"col-11 md:col-4",style:{"margin-inline":"auto"},severity:"warn"},{default:P(()=>e[2]||(e[2]=[u(" WebGpu Support not found, inference will be slow ")])),_:1})):d("",!0),l(f,{class:"col-11 md:col-7",style:{"margin-inline":"auto"},onOnFile:e[0]||(e[0]=r=>{c.onInputFile(r)})}),l(w),t.loading?(m(),p("p",F,"Processing.. "+W(t.countdown)+"s",1)):d("",!0),l(y,{ref:"output"},null,512),e[5]||(e[5]=n("div",{class:"py-3"},null,-1)),e[6]||(e[6]=n("h4",null,"Test Samples",-1)),l(v,{onOnItem:e[1]||(e[1]=r=>c.useSample(r))})])}const U=V(G,[["render",M],["__scopeId","data-v-2aeb53de"]]);export{U as default};
