import{S as v,U as y,P as b,M as h,O as _,F as x,i as I,u as S,g as V}from"./samples-Cg8paRXp.js";import{s as k,_ as B,r as i,o as l,c as u,a as t,b as F,w as N,d as P,e as d,f as r,t as W}from"./index-DtEu__b8.js";import"./onnxruntime-web-CTuRU3N_.js";const C={components:{Samples:v,UploadView:y,ProgressView:b,MyImage:h},data(){return{loading:!1,countdown:"",interval:void 0,showNoWebGpuWarning:!1}},unmounted(){_.Instance.removeAllSessions()},mounted(){Promise.resolve().then(async()=>{await k()||(this.showNoWebGpuWarning=!0)}),crossOriginIsolated||console.log("crossOriginIsolated off")},methods:{save(){const o=this.$refs.imgEL;x.saveAs(o.src,"image.png")},async useSample(o){try{const e=await(await fetch(o)).blob();await this.onInputFile(e)}catch(e){alert(String(e?.message||e))}},async onInputFile(o){if(this.loading)return;const e=Date.now();this.interval=setInterval(()=>{const s=Date.now()-e,a=Math.floor(s/1e3),n=s%1e3;this.countdown=`${a}.${n}`}),this.loading=!0;try{const s=await I(o,!0),a=await S(s,!1);this.$refs.imgEL.src=a}catch(s){console.log(V(s)),console.error(s),alert(String(s?.message||s))}finally{clearInterval(this.interval),this.loading=!1}}}},E={style:{"text-align":"center"}},O={key:1},G={style:{width:"500px",height:"500px",background:"url('./images/download.png')","object-fit":"scale-down","margin-inline":"auto"},ref:"imgEL"};function L(o,e,s,a,n,c){const m=i("message"),p=i("upload-view"),g=i("ProgressView"),f=i("Button");return l(),u("div",E,[e[3]||(e[3]=t("div",{class:"py-2"},null,-1)),e[4]||(e[4]=t("h4",{class:"text-xl"},"Image Upscale ",-1)),n.showNoWebGpuWarning?(l(),F(m,{key:0,closable:!1,class:"col-11 md:col-4",style:{"margin-inline":"auto"},severity:"warn"},{default:N(()=>e[1]||(e[1]=[P("WebGpu Support not found, inference will be slow")])),_:1})):d("",!0),r(p,{class:"col-11 md:col-7",style:{"margin-inline":"auto"},onOnFile:e[0]||(e[0]=w=>{c.onInputFile(w)})}),e[5]||(e[5]=t("div",{class:"py-2"},null,-1)),r(g),n.loading?(l(),u("p",O,"Processing.. "+W(n.countdown)+"s",1)):d("",!0),t("div",null,[t("img",G,null,512),e[2]||(e[2]=t("div",{class:"py-2"},null,-1)),r(f,{label:"Save",size:"large",onClick:c.save,class:"border-round-2xl",icon:"pi pi-save"},null,8,["onClick"])])])}const D=B(C,[["render",L],["__scopeId","data-v-0ee365a0"]]);export{D as default};
