import{O as v,i as _,b as h}from"./opencv-helpers-Fku369FT.js";import{s as I,_ as S,r as o,o as m,c as p,a as n,b as u,d as x,w as k,e as d,f as r,t as B}from"./index-BpQvI-0Z.js";import{S as V,U as N,P,M as W}from"./samples-BXu_c90V.js";import"./onnxruntime-web-CTuRU3N_.js";const G={components:{Samples:V,UploadView:N,ProgressView:P,MyImage:W},data(){return{loading:!1,countdown:"",interval:void 0,showNoWebGpuWarning:!1}},unmounted(){v.Instance.removeAllSessions()},mounted(){Promise.resolve().then(async()=>{await I()||(this.showNoWebGpuWarning=!0)}),crossOriginIsolated||console.log("crossOriginIsolated off")},methods:{async useSample(a){try{const e=await(await fetch(a)).blob();await this.onInputFile(e)}catch(e){alert(String(e?.message||e))}},async onInputFile(a){if(this.loading)return;const e=Date.now();this.interval=setInterval(()=>{const s=Date.now()-e,i=Math.floor(s/1e3),t=s%1e3;this.countdown=`${i}.${t}`}),this.loading=!0;try{const s=await _(a),i=await h(s);await this.$refs.output.setImage(s,i)}catch(s){console.error(s),alert(String(s?.message||s))}finally{clearInterval(this.interval),this.loading=!1}}}},O={style:{"text-align":"center"}},F={key:1};function M(a,e,s,i,t,c){const g=o("message"),f=o("upload-view"),w=o("ProgressView"),y=o("my-image"),b=o("samples");return m(),p("div",O,[e[3]||(e[3]=n("div",{class:"py-2"},null,-1)),e[4]||(e[4]=n("h4",{class:"text-xl"},[u("Remove Background - "),n("a",{target:"_blank",href:"https://huggingface.co/briaai/RMBG-1.4"},"Briaai")],-1)),t.showNoWebGpuWarning?(m(),x(g,{key:0,closable:!1,class:"col-11 md:col-4",style:{"margin-inline":"auto"},severity:"warn"},{default:k(()=>e[2]||(e[2]=[u(" WebGpu Support not found, inference will be slow ")])),_:1})):d("",!0),r(f,{class:"col-11 md:col-7",style:{"margin-inline":"auto"},onOnFile:e[0]||(e[0]=l=>{c.onInputFile(l)})}),r(w),t.loading?(m(),p("p",F,"Processing.. "+B(t.countdown)+"s",1)):d("",!0),r(y,{ref:"output"},null,512),e[5]||(e[5]=n("div",{class:"py-3"},null,-1)),e[6]||(e[6]=n("h4",null,"Test Samples",-1)),r(b,{onOnItem:e[1]||(e[1]=l=>c.useSample(l))})])}const R=S(G,[["render",M],["__scopeId","data-v-2aeb53de"]]);export{R as default};
