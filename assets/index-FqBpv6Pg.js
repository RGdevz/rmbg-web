import{O as x,i as y,b as h}from"./opencv-helpers-CKBzBrKw.js";import{s as v,_,r as l,o as c,c as m,a as s,b as p,d as k,w as I,e as u,f as d,t as S}from"./index-D-HY8g3g.js";import{U as B,P as V,M as N,_ as P,a as W,b as C}from"./elon_musk-DJ7414Hd.js";import"./onnxruntime-web-CTuRU3N_.js";const G={components:{UploadView:B,ProgressView:V,MyImage:N},data(){return{loading:!1,countdown:"",interval:void 0,showNoWebGpuWarning:!1}},unmounted(){x.Instance.removeAllSessions()},mounted(){Promise.resolve().then(async()=>{await v()||(this.showNoWebGpuWarning=!0)}),crossOriginIsolated||console.log("crossOriginIsolated off")},methods:{async useSample(r){try{const e=await(await fetch(r.src)).blob();await this.onInputFile(e)}catch(e){alert(String(e?.message||e))}},async onInputFile(r){if(this.loading)return;const e=Date.now();this.interval=setInterval(()=>{const t=Date.now()-e,a=Math.floor(t/1e3),n=t%1e3;this.countdown=`${a}.${n}`}),this.loading=!0;try{const t=await y(r),a=await h(t);await this.$refs.output.setImage(t,a)}catch(t){console.error(t),alert(String(t?.message||t))}finally{clearInterval(this.interval),this.loading=!1}}}},F={style:{"text-align":"center"}},M={key:1},O={class:"flex justify-content-center gap-2 align-self-center align-items-center flex-wrap p-3 border-round-2xl shadow-1",style:{background:"white",border:"solid 1.2px #e7e7e7"}};function j(r,e,t,a,n,i){const g=l("message"),f=l("upload-view"),w=l("ProgressView"),b=l("my-image");return c(),m("div",F,[e[5]||(e[5]=s("div",{class:"py-2"},null,-1)),e[6]||(e[6]=s("h4",{class:"text-xl"},[p("Remove Background - "),s("a",{target:"_blank",href:"https://huggingface.co/briaai/RMBG-1.4"},"Briaai")],-1)),n.showNoWebGpuWarning?(c(),k(g,{key:0,closable:!1,class:"col-11 md:col-4",style:{"margin-inline":"auto"},severity:"warn"},{default:I(()=>e[4]||(e[4]=[p(" WebGpu Support not found, inference will be slow ")])),_:1})):u("",!0),d(f,{class:"col-11 md:col-7",style:{"margin-inline":"auto"},onOnFile:e[0]||(e[0]=o=>{i.onInputFile(o)})}),d(w),n.loading?(c(),m("p",M,"Processing.. "+S(n.countdown)+"s",1)):u("",!0),d(b,{ref:"output"},null,512),e[7]||(e[7]=s("div",{class:"py-3"},null,-1)),e[8]||(e[8]=s("h4",null,"Test Samples",-1)),s("div",O,[s("img",{onClick:e[1]||(e[1]=o=>i.useSample(o.target)),class:"border-round-2xl cursor-pointer",style:{width:"100px",height:"200px","object-fit":"cover"},src:P}),s("img",{onClick:e[2]||(e[2]=o=>i.useSample(o.target)),class:"border-round-2xl cursor-pointer",style:{width:"100px",height:"200px","object-fit":"cover"},src:W}),s("img",{onClick:e[3]||(e[3]=o=>i.useSample(o.target)),class:"border-round-2xl cursor-pointer",style:{width:"100px",height:"200px","object-fit":"cover"},src:C})])])}const A=_(G,[["render",j],["__scopeId","data-v-210ed841"]]);export{A as default};
