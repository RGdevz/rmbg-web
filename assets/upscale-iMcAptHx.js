import{S as v,U as y,P as x,M as b,O as h,F as _,i as k,u as S,g as I}from"./samples-CqK_a_kk.js";import{s as V,_ as B,r as a,o as i,c,a as s,b as F,w as N,d as P,e as u,f as r,t as W}from"./index-Biy6DLd0.js";import"./onnxruntime-web-CTuRU3N_.js";const C={components:{Samples:v,UploadView:y,ProgressView:x,MyImage:b},data(){return{loading:!1,countdown:"",interval:void 0,showNoWebGpuWarning:!1}},unmounted(){h.Instance.removeAllSessions()},mounted(){Promise.resolve().then(async()=>{await V()||(this.showNoWebGpuWarning=!0)}),crossOriginIsolated||console.log("crossOriginIsolated off")},methods:{save(){const n=this.$refs.imgEL;_.saveAs(n.src,"image.png")},async useSample(n){try{const e=await(await fetch(n)).blob();await this.onInputFile(e)}catch(e){alert(String(e?.message||e))}},async onInputFile(n){if(this.loading)return;const e=Date.now();this.interval=setInterval(()=>{const o=Date.now()-e,l=Math.floor(o/1e3),t=o%1e3;this.countdown=`${l}.${t}`}),this.loading=!0;try{const o=await k(n,!0),l=this.$refs.keep.checked,t=await S(o,l,this.$refs.upscale.value);this.$refs.imgEL.src=t}catch(o){console.log(I(o)),console.error(o),alert(String(o?.message||o))}finally{clearInterval(this.interval),this.loading=!1}}}},E={style:{"text-align":"center"}},O={class:"flex text-lg flex-wrap",style:{"margin-inline":"auto"}},$={ref:"keep",type:"checkbox"},G={class:"pl-3 w-10rem"},L={ref:"upscale",class:"p-dropdown"},M={key:1},U={style:{width:"500px",height:"500px",background:"url('./images/download.png')","object-fit":"scale-down","margin-inline":"auto"},ref:"imgEL"};function z(n,e,o,l,t,p){const d=a("message"),m=a("upload-view"),g=a("ProgressView"),f=a("Button");return i(),c("div",E,[e[6]||(e[6]=s("div",{class:"py-2"},null,-1)),e[7]||(e[7]=s("h4",{class:"text-xl"},"Image Upscale ",-1)),t.showNoWebGpuWarning?(i(),F(d,{key:0,closable:!1,class:"col-11 md:col-4",style:{"margin-inline":"auto"},severity:"warn"},{default:N(()=>e[1]||(e[1]=[P("WebGpu Support not found, inference will be slow")])),_:1})):u("",!0),r(m,{class:"col-11 md:col-7",style:{"margin-inline":"auto"},onOnFile:e[0]||(e[0]=w=>{p.onInputFile(w)})}),e[8]||(e[8]=s("div",{class:"py-2"},null,-1)),s("div",O,[e[4]||(e[4]=s("span",null,"Keep original image size:",-1)),s("input",$,null,512),s("div",G,[e[3]||(e[3]=s("span",null," upscale: ",-1)),s("select",L,e[2]||(e[2]=[s("option",null,"x2",-1),s("option",null,"x4",-1)]),512)])]),e[9]||(e[9]=s("div",{class:"py-2"},null,-1)),r(g),t.loading?(i(),c("p",M,"Processing.. "+W(t.countdown)+"s",1)):u("",!0),s("div",null,[s("img",U,null,512),e[5]||(e[5]=s("div",{class:"py-2"},null,-1)),r(f,{label:"Save",size:"large",onClick:p.save,class:"border-round-2xl",icon:"pi pi-save"},null,8,["onClick"])])])}const j=B(C,[["render",z],["__scopeId","data-v-faa8ca85"]]);export{j as default};
