import{S as y,U as b,P as h,M as x,O as _,F as k,i as S,u as I,g as V}from"./samples-D2RyI-Lm.js";import{s as B,_ as F,r as i,o as l,c as p,a as o,b as N,w as P,d as u,e as d,f as r,t as W}from"./index-C_bgymdD.js";import"./onnxruntime-web-CTuRU3N_.js";const C={components:{Samples:y,UploadView:b,ProgressView:h,MyImage:x},data(){return{loading:!1,countdown:"",interval:void 0,showNoWebGpuWarning:!1}},unmounted(){_.Instance.removeAllSessions()},mounted(){Promise.resolve().then(async()=>{await B()||(this.showNoWebGpuWarning=!0)}),crossOriginIsolated||console.log("crossOriginIsolated off")},methods:{save(){const n=this.$refs.imgEL;k.saveAs(n.src,"image.png")},async useSample(n){try{const e=await(await fetch(n)).blob();await this.onInputFile(e)}catch(e){alert(String(e?.message||e))}},async onInputFile(n){if(this.loading)return;const e=Date.now();this.interval=setInterval(()=>{const s=Date.now()-e,a=Math.floor(s/1e3),t=s%1e3;this.countdown=`${a}.${t}`}),this.loading=!0;try{const s=await S(n,!0),a=this.$refs.keep.checked,t=await I(s,a);this.$refs.imgEL.src=t}catch(s){console.log(V(s)),console.error(s),alert(String(s?.message||s))}finally{clearInterval(this.interval),this.loading=!1}}}},E={style:{"text-align":"center"}},O={ref:"keep",type:"checkbox"},G={key:1},$={style:{width:"500px",height:"500px",background:"url('./images/download.png')","object-fit":"scale-down","margin-inline":"auto"},ref:"imgEL"};function L(n,e,s,a,t,c){const m=i("message"),g=i("upload-view"),f=i("ProgressView"),w=i("Button");return l(),p("div",E,[e[4]||(e[4]=o("div",{class:"py-2"},null,-1)),e[5]||(e[5]=o("h4",{class:"text-xl"},"Image Upscale ",-1)),t.showNoWebGpuWarning?(l(),N(m,{key:0,closable:!1,class:"col-11 md:col-4",style:{"margin-inline":"auto"},severity:"warn"},{default:P(()=>e[1]||(e[1]=[u("WebGpu Support not found, inference will be slow")])),_:1})):d("",!0),r(g,{class:"col-11 md:col-7",style:{"margin-inline":"auto"},onOnFile:e[0]||(e[0]=v=>{c.onInputFile(v)})}),e[6]||(e[6]=o("div",{class:"py-2"},null,-1)),o("div",null,[o("label",null,[o("input",O,null,512),e[2]||(e[2]=u(" Keep original image size "))])]),e[7]||(e[7]=o("div",{class:"py-2"},null,-1)),r(f),t.loading?(l(),p("p",G,"Processing.. "+W(t.countdown)+"s",1)):d("",!0),o("div",null,[o("img",$,null,512),e[3]||(e[3]=o("div",{class:"py-2"},null,-1)),r(w,{label:"Save",size:"large",onClick:c.save,class:"border-round-2xl",icon:"pi pi-save"},null,8,["onClick"])])])}const D=F(C,[["render",L],["__scopeId","data-v-a474abc0"]]);export{D as default};
